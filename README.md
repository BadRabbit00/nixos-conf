# NixOS Configuration Template

–ü—Ä–æ—Å—Ç–æ–π –∏ —É–¥–æ–±–Ω—ã–π —à–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ NixOS –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞. –ù–µ –Ω—É–∂–Ω–æ –¥—É–º–∞—Ç—å –æ–± –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ - –ø—Ä–æ—Å—Ç–æ –Ω–∞—á–Ω–∏ —Ä–∞–±–æ—Ç–∞—Ç—å!

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ NixOS

–ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç —à–∞–≥.

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞

```bash
git clone https://github.com/BadRabbit00/nixos-conf.git ~/nixos-conf
cd ~/nixos-conf
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ —Å–µ–±—è

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **–ó–∞–º–µ–Ω–∏—Ç–µ hardware-configuration.nix –Ω–∞ —Å–≤–æ–π:**
   ```bash
   sudo nixos-generate-config --show-hardware-config > hardware-configuration.nix
   ```
   **–í–∞–∂–Ω–æ:** –≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –≤–∞—à–µ –∂–µ–ª–µ–∑–æ –∏ —Å–æ–∑–¥–∞—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é. –î–ª—è AMD –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤ —Ç–∞–∫–∂–µ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω `kvm-amd` –≤–º–µ—Å—Ç–æ `kvm-intel`.

2. **–ò–∑–º–µ–Ω–∏—Ç–µ hostname –≤ configuration.nix:**
   ```nix
   networking.hostName = "your-hostname"; # –°—Ç—Ä–æ–∫–∞ 13
   ```

3. **–ò–∑–º–µ–Ω–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - –í `configuration.nix` (—Å—Ç—Ä–æ–∫–∞ 31): `users.users.your-username`
   - –í `home.nix` (—Å—Ç—Ä–æ–∫–∏ 4-5): `home.username` –∏ `home.homeDirectory`
   - –í `flake.nix` (—Å—Ç—Ä–æ–∫–∞ 22): `home-manager.users.your-username`

4. **–ò–∑–º–µ–Ω–∏—Ç–µ –∏–º—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ flake.nix (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
   ```nix
   nixosConfigurations.your-hostname = ... # –°—Ç—Ä–æ–∫–∞ 14
   ```

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

- **Git:** –ò–∑–º–µ–Ω–∏—Ç–µ –∏–º—è –∏ email –≤ `home.nix` (—Å—Ç—Ä–æ–∫–∏ 22-23)
- **Timezone:** –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Europe/Moscow –≤ `configuration.nix` (—Å—Ç—Ä–æ–∫–∞ 17)

### 4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ü–µ—Ä–≤–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
sudo nixos-rebuild switch --flake .#default

# –ï—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏–ª–∏ –∏–º—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
sudo nixos-rebuild switch --flake .#your-hostname
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
nixos-conf/
‚îú‚îÄ‚îÄ flake.nix                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–±)
‚îú‚îÄ‚îÄ configuration.nix         # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ hardware-configuration.nix # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∂–µ–ª–µ–∑–∞
‚îî‚îÄ‚îÄ home.nix                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (Home Manager)
```

## üì¶ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (–¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `configuration.nix`:
```nix
environment.systemPackages = with pkgs; [
  vim
  wget
  curl
  git
  firefox  # –î–æ–±–∞–≤—å—Ç–µ —Å—é–¥–∞
  vscode   # –ò —Å—é–¥–∞
];
```

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–∞–∫–µ—Ç—ã

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `home.nix`:
```nix
home.packages = with pkgs; [
  htop
  telegram-desktop
  # –í–∞—à–∏ –ø–∞–∫–µ—Ç—ã –∑–¥–µ—Å—å
];
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# –û–±–Ω–æ–≤–∏—Ç—å flake.lock
nix flake update

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
sudo nixos-rebuild switch --flake .#default

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–ª–∏–∞—Å (–ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è)
update
```

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –±–µ–∑ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
sudo nixos-rebuild dry-build --flake .#default

# –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nixos-rebuild switch --rollback

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–æ–∫–æ–ª–µ–Ω–∏–π
sudo nix-env --list-generations --profile /nix/var/nix/profiles/system

# –ü–æ—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–æ–∫–æ–ª–µ–Ω–∏—è
sudo nix-collect-garbage -d
```

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å flakes
- ‚úÖ Home Manager –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –±–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- ‚úÖ –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è

## üìö –ß—Ç–æ –¥–∞–ª—å—à–µ?

1. –î–æ–±–∞–≤—å—Ç–µ –Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –≤ `home.nix` –∏–ª–∏ `configuration.nix`
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ `home.nix` (git, bash, –∏ —Ç.–¥.)
3. –î–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–∏—Å—ã –≤ `configuration.nix` (docker, postgresql, –∏ —Ç.–¥.)
4. –†–∞–∑–¥–µ–ª–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥ –Ω–∞ –º–æ–¥—É–ª–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üÜò –ü—Ä–æ–±–ª–µ–º—ã?

- –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `hardware-configuration.nix`
- –ï—Å–ª–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º—ë–Ω: –∏–∑–º–µ–Ω–∏—Ç–µ hostname –∏ username
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ flake: –∑–∞–ø—É—Å—Ç–∏—Ç–µ `nix flake update`

---

**–°–æ–≤–µ—Ç:** –ö–æ–º–º–∏—Ç—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —É—Å–ø–µ—à–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏!
